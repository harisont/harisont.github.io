---
title: My first December Adventure (2025)
layout: post
---

The [December Adventure](https://eli.li/december-adventure) is a chill alternative to the [Advent of Code](https://adventofcode.com/), which is exactly what I need in December: the darkness of this month prompts me to spend even more time on my computer, and my goal is to spend at least some of that time every day doing something I'm excited about. 
Doesnâ€™t even really have to be code, as the organizer says. 

Adventure log:

- [Day 1: Plans](#day-1-plans)
- [Day 2: WYTIWYS? WTH?!](#day-2-wytiwys-wth)
- [Day 3: LaTeX macros](#day-3-latex-macros)
- [Day 4: seriously, WTH?](#day-4-seriously-wth)
- [Day 5: Add/remove node complete and new website section](#day-5-addremove-node-complete-and-new-website-section)


## Day 1: Plans
Textbook Monday around here, which leaves little room for adventure besides setting up this log.
For the first few days of the month, I'll be focusing on [wytiwys](https://github.com/harisont/wytiwys/), a programming project that is technically work but also very out of the ordinary (as well as of my comfort zone) and therefore kind of fun.
The enjoyment I often find in my job blurs the line between work and play, but I hope to soon make time for my hobby projects too.
I won't necessarily start anything new and big. 
The plan is rather to do some pleasurable software maintenance, add some new features to my everyday tools, write one or two blog posts and perhaps work on some long-term photography projects.

## Day 2: WYTIWYS? WTH?!
So, [wytiwys](https://github.com/harisont/wytiwys/) is a web-based graphical [dependency tree](https://en.wikipedia.org/wiki/Dependency_grammar) editor and a component of a larger project aimed at making it easier to look for syntactic patterns in large text collections (WYTIWYS stands for What You Tree Is What You Search).

When [the Query Master](https://www.gu.se/en/research/he-builds-it-systems-that-support-future-language-research) and I started looking into this, we found that [reactive-dep-tree](https://github.com/kirianguiller/reactive-dep-tree) does 95% of what we need, and it does it quite well, so my task is just to implement a couple extra features and make some minor tweaks.
Yet, working on wytiwys is definitely adventurous: it requires forking two (if not three) different repositories, intervening on sparsely documented code in TypeScript - a programming language I've never learned and have no ambition to learn - and, worse still, _doing frontend_.
Nothing like my usual PhD work.

Contrary to my expectations, I am having a blast.
Sure, progress is slow, but working in TypeScript with little documentation is akin to reading in Danish without a dictionary: I know enough Swedish to figure out what's going on, but deciphering individual constructions takes effort.
Satisfyingly enough, I've managed to guess my way through the code until now.
Today I actively looked up something (~~list~~ [array concatenation](https://harisont.github.io/lists/web-dev.html#array-concatenation)) for the first time, and I think it's wild.

I'm happy to report I'm almost done adding one of the most important missing features, adding and removing nodes, but less so about the current solution for additions.
I'll try to simplify the code tomorrow.

## Day 3: LaTeX macros
Change of plans!
I thought I'd have some time to work on wytiwys in the afternoon after a seminar, but that was 150% longer than I anticipated (which I didn't mind), so no lines of TypeScript were written today.

On the other hand, I _did_ squeeze a moment of productination into this morning's paper writing session and finally reminded myself how LaTeX macros work.
It's so simple I can't believe this is my first one in years:

```latex
\newcommand{\footnoteurl}[2]{
    \footnote{\href{#1}{\nolinkurl{#2}}}
} % usage: \footnoteurl{LONG-URL}{NICE-URL}
```

The macro allows me to create footnotes whose content is a single URL with a short version, rendered in the PDF, that would work if the reader copy-pasted the link in a modern browser (but not necessarily when clicked from a PDF reader) and a "full" version that is used when the reader clicks on the link.
For example, I used it as 

```latex
\footnoteurl{https://universaldependencies.org/sv/index.html}{universaldependencies.org/sv}
```

## Day 4: seriously, WTH?
This was a long, frustrating day with no time for work that doesn't feel like work at work.
Had a short late night wytiwys session where I tried to complete the hacky implementation of the "add node" functionality I was working on the day before yesterday. 
It seemed to work within a few minutes of writing code, so I thought I'd leave perfectionism aside and keep it that way.
Needless to say, I soon found a bug which seems to be an underlying library's fault (more specifically, it seem to be due to JavaScript's utter lack of type safety, but take all of this with a grain of salt - the whole reasoning is the output of a tired brain past midnight).
It might indeed be necessary to fork a third repository for this project, both if I just want to fix the bug and if I decide to implement a cleaner solution, which would require that either way.

## Day 5: Add/remove node complete and new website section
News from a late evening at the office: I was right about the cause of the bug, although it was not in the library I thought, but in the code wytiwys inherited from reactive-dep-tree itself.
Apparently, TypeScript is perfectly happy to do string + number without throwing a type error, which leads to token IDs such as 31 ("3" + 1) instead of 4 (3 + 1).
The fix is a single line change:

```typescript
// was: headId = e.detail.dragged;
headId = parseInt(e.detail.dragged, 10);
```

...but come on! 
Not even _Python_ lets you sum numbers and strings and it doesn't have "type" in its name.

Anyway, I played a little bit with the stylesheet etc. and now the thing looks like this:

![A dependency tree for the sentence "It was not possible to add or remove nodes." being transformed into "Now it is possible to add or remove nodes!"](../assets/img/das/wytiwys-add-rm.gif)

(I just noticed I forgot to record the text field where I was typing the new values... Whatever, it's late. I should go home)

I also added a [new section](../lists.md) to this website, because apparently after 12 hours at uni I'm too tired to get groceries, make food or go climbing but not for spending time in my text editor (some days are like that). 
I called it `[[[a]]]` because it's a list of lists of lists. 
The contents have been there for a while, but until now they were only accessible to the selected few that knew what the various URLs were.
I would also like to add a list of all of the Straordinarie Scrittrici Svedesi (extraordinary Swedish women writers) I've been reading since starting to learn Swedish.